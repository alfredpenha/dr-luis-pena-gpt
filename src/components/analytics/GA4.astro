---
import { analyticsConfig } from "@/lib/analytics-config";
import { getAnalyticsScriptSrc, isAnalyticsEnabled } from "@/lib/analytics";
import analyticsClientScriptUrl from "@/scripts/analytics.js?url";

const scriptSrc = getAnalyticsScriptSrc();
---

{
  isAnalyticsEnabled() && scriptSrc && (
    <>
      <script async src={scriptSrc} />
      <script
        is:inline
        set:html={`window.dataLayer=window.dataLayer||[];window.gtag=window.gtag||function(){window.dataLayer.push(arguments);};window.gtag("js",new Date());window.gtag("config","${analyticsConfig.measurementId}");`}
      />
      <script type="module" src={analyticsClientScriptUrl} />
    </>
  )
}
