---
import { analyticsConfig } from "@/lib/analytics-config";
import { getAnalyticsScriptSrc, isAnalyticsEnabled } from "@/lib/analytics";

const scriptSrc = getAnalyticsScriptSrc();
---

{
  isAnalyticsEnabled() && scriptSrc && (
    <>
      <script async src={scriptSrc} />
      <script
        is:inline
        set:html={`window.dataLayer=window.dataLayer||[];function gtag(){window.dataLayer.push(arguments);}gtag("js",new Date());gtag("config","${analyticsConfig.measurementId}");`}
      />
    </>
  )
}
