---
import { Image } from "astro:assets";
import logo from "@/assets/images/logo-transparente.png";
import Container from "@/components/ui/Container.astro";
import Button from "@/components/ui/Button.astro";
import MobileMenu from "@/components/ui/MobileMenu.astro";
import { site } from "@/lib/content";
import { withBase } from "@/lib/urls";
---

<header
  class="sticky top-0 z-50 border-b border-border bg-surface-elevated/90 backdrop-blur"
>
  <Container class="py-3">
    <div class="flex items-center justify-between gap-3">
      <a
        href={withBase("/")}
        class="flex min-w-0 items-center gap-3 focus-visible:outline focus-visible:outline-2 focus-visible:outline-offset-2 focus-visible:outline-ring"
        aria-label={site.brand.clinicName}
      >
        <Image
          src={logo}
          alt={site.brand.clinicName}
          widths={[48, 64]}
          class="size-12 object-contain"
        />
        <div class="min-w-0">
          <p class="truncate text-sm font-semibold leading-[22px] text-text">
            {site.brand.clinicName}
          </p>
          <p class="truncate text-xs leading-5 text-text-muted">
            {site.brand.lockupText}
          </p>
        </div>
      </a>

      <nav
        class="hidden items-center gap-6 md:flex"
        aria-label="Navegacion principal"
      >
        {
          site.nav.items.map((item) => (
            <a
              href={withBase(item.href)}
              class="text-sm font-medium leading-[22px] text-text-muted transition hover:text-primary-hover focus-visible:outline focus-visible:outline-2 focus-visible:outline-offset-2 focus-visible:outline-ring"
            >
              {item.label}
            </a>
          ))
        }
      </nav>

      <div class="flex items-center gap-2">
        <Button
          href={site.ctas.primaryHref}
          variant="whatsapp"
          size="sm"
          class="hidden md:inline-flex"
          ariaLabel={site.ctas.primaryLabel}
          trackEvent="click_whatsapp"
          trackSource="header"
        >
          {site.ctas.primaryLabel}
        </Button>
        <MobileMenu
          items={site.nav.items}
          ctaLabel={site.ctas.primaryLabel}
          ctaHref={site.ctas.primaryHref}
        />
      </div>
    </div>
  </Container>
</header>
